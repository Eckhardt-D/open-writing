{"version":3,"file":"chunk.cbbb6c95.js","sources":["../../../src/components/AuthForm.svelte"],"sourcesContent":["<script>\n  let email = \"\";\n  let password = \"\";\n  let password2 = \"\";\n  let showError = false;\n  let errorMessage = \"\";\n  let showSuccess = false;\n  let successMessage = \"\";\n  let changeMode = () => (loginMode = !loginMode);\n  let createError = message => {\n    showError = true;\n    errorMessage = message;\n  };\n\n  let signUpWithEmail = function() {\n    authentication\n      .createUserWithEmailAndPassword(email, password)\n      .then(() => {\n        authentication.currentUser\n          .sendEmailVerification({\n            url: \"https://open-writing.firebaseapp.com/auth/login\",\n            handleCodeInApp: false\n          })\n          .then(() => {\n            email = \"\";\n            password = \"\";\n            password2 = \"\";\n            showSuccess = true;\n            successMessage = \"We have sent a confirmation email\";\n          })\n          .catch(error => {\n            showError = true;\n            errorMessage = \"Error sending email verification\";\n          });\n      })\n      .catch(error => {\n        switch (error.code) {\n          case \"auth/email-already-in-use\":\n            createError(\"Email already exists\");\n            break;\n          case \"auth/invalid-email\":\n            createError(\"Not a valid email address\");\n            break;\n          case \"auth/weak-password\":\n            createError(\"Your password is too weak.\");\n            break;\n          default:\n            createError(\"Something went wrong\");\n            break;\n        }\n      });\n  };\n\n  let loginWithEmail = function() {\n    console.log(\"login in\");\n  };\n\n  export let loginMode;\n</script>\n\n<div class=\"card border-light mx-auto\" style=\"max-width: 25rem;\">\n  <div class=\"card-header\">\n    <h5 class=\"mb-0\">\n       {loginMode ? 'Login to your account' : 'Create an account'}\n    </h5>\n  </div>\n  <div class=\"card-body\">\n    <form>\n      <div class=\"form-group\">\n        <label for=\"email\">E-mail address</label>\n        <input\n          bind:value={email}\n          id=\"email\"\n          type=\"email\"\n          class=\"form-control\"\n          required />\n      </div>\n      <div class=\"form-group\">\n        <label for=\"password\">Password</label>\n        <input\n          bind:value={password}\n          id=\"password\"\n          type=\"password\"\n          class=\"form-control\"\n          required />\n      </div>\n      {#if !loginMode}\n        <div class=\"form-group\">\n          <label for=\"password2\">Re-enter your password</label>\n          <input\n            bind:value={password2}\n            id=\"password2\"\n            type=\"password\"\n            class=\"form-control\"\n            required />\n        </div>\n      {/if}\n      <div class=\"form-group\">\n        <button\n          type=\"button\"\n          on:click={loginMode ? loginWithEmail : signUpWithEmail}\n          class=\"btn btn-primary\">\n           {loginMode ? 'Login' : 'Sign Up'}\n        </button>\n      </div>\n      {#if showError}\n        <div class=\"alert alert-dismissible alert-danger\">\n          <button\n            type=\"button\"\n            class=\"close\"\n            on:click={() => (showError = false)}>\n            ×\n          </button>\n          <strong>Error!</strong>\n           {errorMessage}\n        </div>\n      {/if}\n      {#if showSuccess}\n        <div class=\"alert alert-dismissible alert-success\">\n          <button\n            type=\"button\"\n            class=\"close\"\n            on:click={() => (showSuccess = false)}>\n            ×\n          </button>\n          <strong>Success!</strong>\n           {successMessage}\n        </div>\n      {/if}\n      <button class=\"btn btn-secondary w-100\">GitHub</button>\n      <button class=\"btn btn-secondary w-100 mt-1\">Google</button>\n      <small class=\"text-muted\">\n         {loginMode ? \"Don't have an account?\" : 'Already have an account?'}\n        <span on:click={changeMode} class=\"btn btn-link pl-0\">\n           {loginMode ? 'Sign up' : 'Login'}\n        </span>\n      </small>\n    </form>\n  </div>\n</div>\n"],"names":["password2","errorMessage","ctx","successMessage","loginMode","loginWithEmail","signUpWithEmail","changeMode","email","password","showError","showSuccess","createError","message","authentication","createUserWithEmailAndPassword","then","currentUser","sendEmailVerification","url","handleCodeInApp","catch","error","code","console","log"],"mappings":"muBA0FwBA,0CAAAA,8JAwBZC,+PAAAA,8IAJUC,iHAIVD,mKAYAE,mQAAAA,iJAJUD,qHAIVC,0IA/DJC,UAAY,wBAA0B,yBAuClCA,UAAY,QAAU,eA8BxBA,UAAY,yBAA2B,gCAErCA,UAAY,UAAY,cAhDxBA,qBAmBQ,qBAYE,i5EAjBFA,YAAYC,iBAAiBC,gCAiCzBC,qHA9DFC,0DASAC,oOAjBdL,UAAY,wBAA0B,kDAQxBI,8BASAC,YAMVL,+FAgBAA,UAAY,QAAU,sBAGvBM,yEAYAC,iGAeDP,UAAY,yBAA2B,6DAErCA,UAAY,UAAY,oGArIlC,IAAII,EAAQ,GACRC,EAAW,GACXT,EAAY,GACZU,GAAY,EACZT,EAAe,GACfU,GAAc,EACdR,EAAiB,GAEjBS,EAAcC,kBAChBH,GAAY,oBACZT,EAAeY,eA8CNT,6KAjDM,aAAOA,GAAaA,6CAMf,WACpBU,eACGC,+BAA+BP,EAAOC,GACtCO,KAAK,KACJF,eAAeG,YACZC,sBAAsB,CACrBC,IAAK,kDACLC,iBAAiB,IAElBJ,KAAK,eACJR,EAAQ,iBACRC,EAAW,kBACXT,EAAY,oBACZW,GAAc,sBACdR,EAAiB,uCAElBkB,MAAMC,kBACLZ,GAAY,oBACZT,EAAe,wCAGpBoB,MAAMC,IACL,OAAQA,EAAMC,MACZ,IAAK,4BACHX,EAAY,wBACZ,MACF,IAAK,qBACHA,EAAY,6BACZ,MACF,IAAK,qBACHA,EAAY,8BACZ,MACF,QACEA,EAAY,2CAMD,WACnBY,QAAQC,IAAI"}