import{a,b as s,c as n,d as o,e,f as r,g as c,h as t,i,j as l,s as u,k as d,l as h,m as f,n as m,H as p,o as g,p as v,q as w,y as E,I as M,r as b,J as N,t as y}from"./chunk.ec0c8f00.js";import"./chunk.70964b6f.js";import{a as k}from"./chunk.c79ea09f.js";function _(a){var s,n,o,e,r,c;return{c:function(){s=i("div"),n=i("label"),o=l("Re-enter your password"),e=u(),r=i("input"),this.h()},l:function(a){s=d(a,"DIV",{class:!0},!1);var c=h(s);n=d(c,"LABEL",{for:!0},!1);var t=h(n);o=f(t,"Re-enter your password"),t.forEach(m),e=f(c,"\n          "),r=d(c,"INPUT",{id:!0,type:!0,class:!0,required:!0},!1),h(r).forEach(m),c.forEach(m),this.h()},h:function(){n.htmlFor="password2",r.id="password2",p(r,"type","password"),r.className="form-control",r.required=!0,s.className="form-group",c=g(r,"input",a.input_input_handler)},m:function(c,t){v(c,s,t),w(s,n),w(n,o),w(s,e),w(s,r),r.value=a.password2},p:function(a,s){a.password2&&(r.value=s.password2)},d:function(a){a&&m(s),c()}}}function S(a){var s,n,o,e,r,c,t,p,M;return{c:function(){s=i("div"),n=i("button"),o=l("×"),e=u(),r=i("strong"),c=l("Error!"),t=u(),p=l(a.errorMessage),this.h()},l:function(i){s=d(i,"DIV",{class:!0},!1);var l=h(s);n=d(l,"BUTTON",{type:!0,class:!0},!1);var u=h(n);o=f(u,"×"),u.forEach(m),e=f(l,"\n          "),r=d(l,"STRONG",{},!1);var g=h(r);c=f(g,"Error!"),g.forEach(m),t=f(l,"\n           "),p=f(l,a.errorMessage),l.forEach(m),this.h()},h:function(){n.type="button",n.className="close",s.className="alert alert-dismissible alert-danger",M=g(n,"click",a.click_handler)},m:function(a,i){v(a,s,i),w(s,n),w(n,o),w(s,e),w(s,r),w(r,c),w(s,t),w(s,p)},p:function(a,s){a.errorMessage&&E(p,s.errorMessage)},d:function(a){a&&m(s),M()}}}function I(a){var s,n,o,e,r,c,t,p,M;return{c:function(){s=i("div"),n=i("button"),o=l("×"),e=u(),r=i("strong"),c=l("Success!"),t=u(),p=l(a.successMessage),this.h()},l:function(i){s=d(i,"DIV",{class:!0},!1);var l=h(s);n=d(l,"BUTTON",{type:!0,class:!0},!1);var u=h(n);o=f(u,"×"),u.forEach(m),e=f(l,"\n          "),r=d(l,"STRONG",{},!1);var g=h(r);c=f(g,"Success!"),g.forEach(m),t=f(l,"\n           "),p=f(l,a.successMessage),l.forEach(m),this.h()},h:function(){n.type="button",n.className="close",s.className="alert alert-dismissible alert-success",M=g(n,"click",a.click_handler_1)},m:function(a,i){v(a,s,i),w(s,n),w(n,o),w(s,e),w(s,r),w(r,c),w(s,t),w(s,p)},p:function(a,s){a.successMessage&&E(p,s.successMessage)},d:function(a){a&&m(s),M()}}}function L(a){var s,n,o,e,r,c,t,y,k,L,T,U,A,D,V,B,O,P,q,G,x,R,j,F,H,C,W,Y,$,J,z,K,Q,X,Z,aa,sa,na,oa=a.loginMode?"Login to your account":"Create an account",ea=a.loginMode?"Login":"Sign Up",ra=a.loginMode?"Don't have an account?":"Already have an account?",ca=a.loginMode?"Sign up":"Login",ta=!a.loginMode&&_(a),ia=a.showError&&S(a),la=a.showSuccess&&I(a);return{c:function(){s=i("div"),n=i("div"),o=i("h5"),e=l(oa),r=u(),c=i("div"),t=i("form"),y=i("div"),k=i("label"),L=l("E-mail address"),T=u(),U=i("input"),A=u(),D=i("div"),V=i("label"),B=l("Password"),O=u(),P=i("input"),q=u(),ta&&ta.c(),G=u(),x=i("div"),R=i("button"),j=l(ea),F=u(),ia&&ia.c(),H=u(),la&&la.c(),C=u(),W=i("button"),Y=l("GitHub"),$=u(),J=i("button"),z=l("Google"),K=u(),Q=i("small"),X=l(ra),Z=u(),aa=i("span"),sa=l(ca),this.h()},l:function(a){s=d(a,"DIV",{class:!0,style:!0},!1);var i=h(s);n=d(i,"DIV",{class:!0},!1);var l=h(n);o=d(l,"H5",{class:!0},!1);var u=h(o);e=f(u,oa),u.forEach(m),l.forEach(m),r=f(i,"\n  "),c=d(i,"DIV",{class:!0},!1);var p=h(c);t=d(p,"FORM",{},!1);var g=h(t);y=d(g,"DIV",{class:!0},!1);var v=h(y);k=d(v,"LABEL",{for:!0},!1);var w=h(k);L=f(w,"E-mail address"),w.forEach(m),T=f(v,"\n        "),U=d(v,"INPUT",{id:!0,type:!0,class:!0,required:!0},!1),h(U).forEach(m),v.forEach(m),A=f(g,"\n      "),D=d(g,"DIV",{class:!0},!1);var E=h(D);V=d(E,"LABEL",{for:!0},!1);var M=h(V);B=f(M,"Password"),M.forEach(m),O=f(E,"\n        "),P=d(E,"INPUT",{id:!0,type:!0,class:!0,required:!0},!1),h(P).forEach(m),E.forEach(m),q=f(g,"\n      "),ta&&ta.l(g),G=f(g,"\n      "),x=d(g,"DIV",{class:!0},!1);var b=h(x);R=d(b,"BUTTON",{type:!0,class:!0},!1);var N=h(R);j=f(N,ea),N.forEach(m),b.forEach(m),F=f(g,"\n      "),ia&&ia.l(g),H=f(g,"\n      "),la&&la.l(g),C=f(g,"\n      "),W=d(g,"BUTTON",{class:!0},!1);var _=h(W);Y=f(_,"GitHub"),_.forEach(m),$=f(g,"\n      "),J=d(g,"BUTTON",{class:!0},!1);var S=h(J);z=f(S,"Google"),S.forEach(m),K=f(g,"\n      "),Q=d(g,"SMALL",{class:!0},!1);var I=h(Q);X=f(I,ra),Z=f(I,"\n        "),aa=d(I,"SPAN",{class:!0},!1);var na=h(aa);sa=f(na,ca),na.forEach(m),I.forEach(m),g.forEach(m),p.forEach(m),i.forEach(m),this.h()},h:function(){o.className="mb-0",n.className="card-header",k.htmlFor="email",U.id="email",p(U,"type","email"),U.className="form-control",U.required=!0,y.className="form-group",V.htmlFor="password",P.id="password",p(P,"type","password"),P.className="form-control",P.required=!0,D.className="form-group",R.type="button",R.className="btn btn-primary",x.className="form-group",W.className="btn btn-secondary w-100",J.className="btn btn-secondary w-100 mt-1",aa.className="btn btn-link pl-0",Q.className="text-muted",c.className="card-body",s.className="card border-light mx-auto",M(s,"max-width","25rem"),na=[g(U,"input",a.input0_input_handler),g(P,"input",a.input1_input_handler),g(R,"click",a.handleAuth),g(aa,"click",a.changeMode)]},m:function(i,l){v(i,s,l),w(s,n),w(n,o),w(o,e),w(s,r),w(s,c),w(c,t),w(t,y),w(y,k),w(k,L),w(y,T),w(y,U),U.value=a.email,w(t,A),w(t,D),w(D,V),w(V,B),w(D,O),w(D,P),P.value=a.password,w(t,q),ta&&ta.m(t,null),w(t,G),w(t,x),w(x,R),w(R,j),w(t,F),ia&&ia.m(t,null),w(t,H),la&&la.m(t,null),w(t,C),w(t,W),w(W,Y),w(t,$),w(t,J),w(J,z),w(t,K),w(t,Q),w(Q,X),w(Q,Z),w(Q,aa),w(aa,sa)},p:function(a,s){a.loginMode&&oa!==(oa=s.loginMode?"Login to your account":"Create an account")&&E(e,oa),a.email&&(U.value=s.email),a.password&&(P.value=s.password),s.loginMode?ta&&(ta.d(1),ta=null):ta?ta.p(a,s):((ta=_(s)).c(),ta.m(t,G)),a.loginMode&&ea!==(ea=s.loginMode?"Login":"Sign Up")&&E(j,ea),s.showError?ia?ia.p(a,s):((ia=S(s)).c(),ia.m(t,H)):ia&&(ia.d(1),ia=null),s.showSuccess?la?la.p(a,s):((la=I(s)).c(),la.m(t,C)):la&&(la.d(1),la=null),a.loginMode&&ra!==(ra=s.loginMode?"Don't have an account?":"Already have an account?")&&E(X,ra),a.loginMode&&ca!==(ca=s.loginMode?"Sign up":"Login")&&E(sa,ca)},i:b,o:b,d:function(a){a&&m(s),ta&&ta.d(),ia&&ia.d(),la&&la.d(),N(na)}}}function T(a,s,n){var o;y(a,k,function(a){n("$user",o=a)});var e=s.loginMode,r="",c="",t="",i=!1,l="",u=!1,d="",h=function(a){n("showError",i=!0),n("errorMessage",l=a)},f=function(a){switch(a){case"auth/email-already-in-use":h("Email already exists");break;case"auth/invalid-email":h("Not a valid email address");break;case"auth/weak-password":h("Your password is too weak.");break;case"auth/invalid-email":h("User not found");break;case"auth/user-disabled":h("You are disallowed from this site.");break;case"auth/user-not-found":h("User not found");break;case"auth/wrong-password":h("Incorrect e-mail or password");break;default:h("Something went wrong")}},m=function(){n("email",r=""),n("password",c=""),n("password2",t="")},p=function(){authentication.createUserWithEmailAndPassword(r,c).then(function(){authentication.currentUser.sendEmailVerification({url:"https://open-writing.firebaseapp.com/auth/login",handleCodeInApp:!1}).then(function(){m(),n("showSuccess",u=!0),n("successMessage",d="We have sent a confirmation email")}).catch(function(a){n("showError",i=!0),n("errorMessage",l="Error sending email verification")})}).catch(function(a){return f(a.code)})},g=function(){authentication.signInWithEmailAndPassword(r,c).then(function(){m(),n("showSuccess",u=!0),n("successMessage",d="Logging in")}).catch(function(a){o=!1,k.set(o);var s=a.code;f(s)})};return a.$set=function(a){"loginMode"in a&&n("loginMode",e=a.loginMode)},{loginMode:e,email:r,password:c,password2:t,showError:i,errorMessage:l,showSuccess:u,successMessage:d,handleAuth:function(){if(e)return g();p()},changeMode:function(){n("loginMode",e=!e)},input0_input_handler:function(){r=this.value,n("email",r)},input1_input_handler:function(){c=this.value,n("password",c)},input_input_handler:function(){t=this.value,n("password2",t)},click_handler:function(){var a=i=!1;return n("showError",i),a},click_handler_1:function(){var a=u=!1;return n("showSuccess",u),a}}}var U=function(i){function l(a){var t;return s(this,l),t=n(this,o(l).call(this)),e(r(t),a,T,L,c,["loginMode"]),t}return a(l,t),l}();export{U as a};
//# sourceMappingURL=chunk.7b736d75.js.map
